<?xml version="1.0"?>

<!-- GFDL Model Development Team (MDT) documentation: http://cobweb.gfdl.noaa.gov/~niz/mdt/ -->
<!-- GFDL MDT Atmosphere Working Group (AWG) documentation: http://cobweb.gfdl.noaa.gov/~cjg/awg/ -->

<!-- Model configurations in support of MDT Atmosphere Working Group (AWG), v20150416 revision -->

<!-- QUICK START GUIDE:

# To checkout this xml (you should have done this already)
# .. module load fre/bronx-9
# .. module load git
# .. mkdir -p $home/awg/ulm
# .. cd $home/awg/ulm
# .. git clone -b awg_v20150416 http://gitlab.gfdl.noaa.gov/mdt/xml.git xml_v20150416

# Change YOURGROUPLETTER to your group, such as f, w, o...
      <project>gfdl_YOURGROUPLETTER</project>

# To check out source code and compile:
# .. module load fre/bronx-9
# .. fremake -x awg.xml -p ncrc2.intel -t openmp cm4p5_v20150416

# To run regression test (with staging):
# .. frerun -S -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4f5

# To run a complete experiment (with automated database entry if MDBIswitch in "on"):
# .. frerun -x awg.xml -p ncrc2.intel -t openmp c96L32_am4f5

# To run fredb after an experiment is finished to manually add it to the database:
# .. fredb-pp -x awg.xml -p gfdl.ncrc2-intel -t openmp c96L32_am4f5

-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2003/XInclude">

  <property name="RELEASE" value="ulm"/>                <!-- CVS tag for source code -->
  <property name="MOM6_DATE" value="2014.11.17"/>                  <!-- git tag date for MOM6 source code -->
  <property name="MOM6_GIT_TAG" value="dev/master/$(MOM6_DATE)"/>  <!-- git tag for MOM6 source code -->
  <property name="FRE_STEM" value="awg/$(RELEASE)"/>
  <property name="FRE_VERSION" value="fre/bronx-9"/>             <!-- -->
  <property name="ANALYSIS_SWITCH" value="on"/>
  <property name="MDBIswitch" value="on"/>                       <!-- on/off switch for MDBI database -->
  <property name="ProjectID" value="AWG"/>                       <!-- database top level -->

  <property name="AWG_INPUT_HOME_GAEA" value="$HOME/awg/ulm/xml_v20150416/awg_include"/>
  <property name="AWG_INPUT_HOME_GFDL" value="/home/$USER/ncrc/awg/ulm/xml_v20150416/awg_include"/>

<!--
GFDL FAIR USE POLICY

GFDL recognizes the essential nature of collaboration in the scientific
enterprise, including the importance of novel application and analysis of our
models. In order to maximize mutual benefit from collaboration, the use of
experimental GFDL models** should be done in a manner that ensures that
individuals involved in model development receive proper credit for their
work; in order to minimize the potential for misapplication of experimental
models, collaborations should actively engage model developers. Publication of
results using experimental GFDL models should be done in consultation with
scientists that participated in the model development. Consultation with GFDL
model developers should occur before submission of publications based on
experimental GFDL models, and should include agreement on the appropriate level
of acknowledgment, co-authorship and participation by the model developers.
Since experimental models have not been thoroughly vetted, experimental GFDL
models and their output should be distributed only after consultation with the
developers of the model. After a GFDL model has been described in a
peer-reviewed publication it is no longer experimental, and results based on
the model should cite the publication(s) describing the model.
 
** "Experimental GFDL models" refers to models (e.g., a coupled climate model),
model components (e.g., parameterization schemes), model configurations (e.g.,
the specific arrangement and parameter settings of model components) arising
from model development efforts at GFDL, but whose formulation and configuration
have not yet been documented in the peer-reviewed literature, as well as outputs
from integrations with these models.
-->

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

<!--
AMIP simulations are configured to start in 1980 with the first year being a 
spin-up year. Postprocessing and analysis are performed starting in 1981. The 
length of the simulation and analysis period can be controlled by changing 
properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_AMIP_START" value="1980"/>
  <property name="EXP_AMIP_END"   value="2000"/>
  <property name="EXP_AMIP_LEN"   value="21"/>
  <property name="ANA_AMIP_START" value="1981"/>
  <property name="ANA_AMIP_END"   value="2000"/>
  <property name="ANA_AMIP_LEN"   value="20yr"/>
  <!-- Post-processing chunk length -->
  <!-- ANA_AMIP_LEN must be an integer multiple of PP_AMIP_CHUNK -->
  <property name="PP_AMIP_CHUNK" value="5yr"/>

<!--=====================================-->
<!--= RFP, CESS SENSITIVITY EXPERIMENTS =-->
<!--=====================================-->

<!--
Experiments to compute RFP (Radiative Flux Perturbation) and Cess sensitivity 
were originally configured by Larry Horowitz. Experiments are configured to 
start in year 0001, postprocessing and analysis are performed starting from 
the second year (0002). The length of the simulation and analysis period can 
be controlled by changing properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_CLIMO_START" value="0001"/>
  <property name="EXP_CLIMO_END"   value="0011"/>
  <property name="EXP_CLIMO_LEN"   value="11"/>
  <property name="ANA_CLIMO_START" value="0002"/>
  <property name="ANA_CLIMO_END"   value="0011"/>
  <property name="ANA_CLIMO_LEN"   value="10yr"/>
  <property name="PP_CLIMO_CHUNK"  value="5yr"/>

<!--=================-->
<!--= CHANGING NPES =-->
<!--=================-->

<!--
This xml includes a number of predefined options for the number of PEs.
Changing the number of PEs can be accomplished by simply 
modifying 'npes' and segment 'runTime' in the xml <production> block:

      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>

Choosing a particular PE number is a balancing act. The higher npes, 
the faster the model throughput, but also the lower the model efficiency
(i.e. the overall simulation will cost more in terms of core hours).

Available options for c96L48:
"""""""""""""""""""""""""""""
  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |  
  |  npes  |    am4f5             |                      |
  +========+======================+======================+
  |   432  |    09:00:00          |                      |  
  |   864  |    05:20:00          |                      |
  |  1152  |    04:00:00          |                      |
  |**1728**|    03:00:00          |                      |
  |  2304  |    02:30:00          |                      |
  |  3456  |    02:15:00          |                      |
  +========+======================+======================+


Available options for c192L48:
""""""""""""""""""""""""""""""

  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |
  |  npes  |    am4f5             |                      |
  +========+======================+======================+
  |  2304  |    09:00:00          |                      |
  |  3456  |    07:00:00          |                      |
  |**4608**|    05:20:00          |                      |
  |  6912  |    04:00:00          |                      |
  +========+======================+======================+


Available options for c96L32:
""""""""""""""""""""""""""""""

  +========+======================+======================+
  |           Suggested run time for 12 month segment    |
  |  npes       am4f5                                    |
  +========+=============================================+
  |   432  |    09:00:00                                 |
  |   864  |    05:20:00                                 |
  |  1152  |    04:00:00                                 |
  |**1728**|    01:30:00                                 |
  |  2304  |    02:30:00                                 |
  |  3456  |    02:15:00                                 |
  +========+======================+======================+ 

Available options for c192L32:
""""""""""""""""""""""""""""""

  +========+======================+======================+
  |           Suggested run time for 12 month segment    |
  |  npes       am4f5                                    |
  +========+=============================================+
  |  2304  |    09:00:00                                 |
  |  3456  |    07:00:00                                 |
  |**4608**|    04:00:00                                 |
  |  6912  |    04:00:00                                 |
  +========+======================+======================+


**Note:** default settings are highlighted in **bold**. Suggested 
run time values may need to be adjusted for your specific
configuration.

-->

  <setup>

<!-- MDBI -->
    <fmsRelease>fmsversion</fmsRelease>
<!-- /MDBI -->

    <platform name="ncrc2.intel">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_m</project>
      <directory stem="$(FRE_STEM)">
        <src>$HOME/$(stem)/$(name)/src</src>
        <scripts>$HOME/$(stem)/xml_v20150416/scripts</scripts>
        <stdout>/lustre/f1/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <csh><![CDATA[
        source $MODULESHOME/init/csh
 
        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/4.0.46
        module swap intel intel/12.0.5.220
        module load $(FRE_VERSION)
        module load git

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
      ]]></csh>
    </platform>

    <platform name="gfdl.ncrc2-intel">
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive>
        <analysis>/nbhome/$USER/$(stem)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /home/fms/local/modulefiles
        module purge
        module load $(FRE_VERSION)
        module load fre-analysis
        module load git
        ]]>
      </csh>
    </platform>

  </setup>

<!--===========-->
<!--= COMPILE =-->
<!--===========-->
  <!--The property MOM6_EXAMPLES should point to the mom6 directory that is checked out. It is needed by MOM6 to access its inpu data files-->
  <property name="MOM6_EXAMPLES"  value="$root/cm4_compile/src/mom6"/>

  <experiment name="cm4p5_v20150416">
    <description>

Experiment to build executable.
* ulm code base
* Code updates from John Dunne for new surface fluxes options (drag_min_jpd_20141030)
* Code changes from Ming Zhao for low sensitivity configuration. Changes answers for all! (lowsen20141106_miz)
* Chris Golaz total activation bug fix (ulm_total_act_fix_cjg)
* Chris Golaz bug fix to enable do_gust_cv and convect_shutoff options. May change answer.
* David Paynter radiation bug fix for debug mode
* Code update for icebergs to output less warnings adjustable_berg_warn_linits_jpk_20141003
* Ming Zhao code changes for am4f3 (am4f3_20150225_miz and git tags user/cjg/am4f3_20150225_miz). Changes answers.
* Code update from Huan Guo to merge moist_processes.F90 changes (am4f3_convect_fix_20150303_h1g)
* Huan Guo code changes to scale aerosol wet deposition using namelist parameter (wetDep_scale_20150311_h1g)
* Changes from Paul Ginoux to enable fast aerosols.

    </description>

    <component name="fms" paths="shared">
     <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> shared.git </codeBase>
        <csh><![CDATA[
          ( cd shared && git checkout $(RELEASE) )
          ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_libMPI -Duse_netCDF </cppDefs>
      </compile>
    </component>

    <component name="atmos_phys" requires="fms" paths="atmos_param atmos_shared">
      <description domainName="" communityName="" communityVersion="$(RELEASE)" communityGrid=""/>
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="$(RELEASE)">atmos_shared.git atmos_param.git</codeBase>
          <csh><![CDATA[
            ( cd atmos_shared && git checkout user/cjg/awg_v20150416 )
            ( cd atmos_param && git checkout user/cjg/awg_v20150416 )
           ]]>
          </csh>
        </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DCLUBB</cppDefs>
      </compile>
    </component> 

    <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools" requires="fms atmos_phys">
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="user/cjg/am4f3_20150225_miz">atmos_drivers.git atmos_cubed_sphere.git</codeBase>
        <csh><![CDATA[
          ( cd atmos_drivers && git checkout user/cjg/am4f3_20150225_miz )
          ( cd atmos_cubed_sphere && git checkout user/cjg/am4f3_20150225_miz )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DSPMD</cppDefs>
      </compile>
    </component>

    <component name="ice_sis" requires="fms" paths="ice_sis ice_param">
      <description domainName="Sea Ice SIS" communityName="GFDL-SIS" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source>
        <codeBase version="$(RELEASE)"> ice_sis ice_param </codeBase>
        <csh>cvs up -r adjustable_berg_warn_linits_jpk_20141003 ice_sis/ice_bergs.F90 #needed for CM4i_c96L48_am4a1r1_1pct-co2-2X</csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_netCDF</cppDefs>
      </compile>
    </component>

    <component name="land_lad2" requires="fms" paths="land_lad2">
      <description domainName="LM3" communityName="land_lad2" communityVersion="$(RELEASE)" communityGrid=""/>
      <source>
        <codeBase version="$(RELEASE)"> land_lad2 </codeBase>
	<csh>
          #==For JPD Drag Tests==
          cvs up -r merged_drag_updates_jpk_20141104_nnz land_lad2/land_model.F90
          # Protection from negative soil water divergence situations
          cvs up -r ulm_neg_water_div_20150321_slm_pcm land_lad2/soil/soil.F90
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>

<!--The following csh block is needed for compiler pre-processors that are not ANSI-compliant, such as pathscale-->
<csh> <![CDATA[
cat >Makefile.cpp <<EOF
CPPDEFS =
FRETARGET = $(target)
ifneq (\$(findstring hdf5,\${FRETARGET}),)
else
  CPPDEFS += -Duse_LARGEFILE
endif
EOF
echo vpath %.F90 `find $cwd/land_lad2 -type d` >> Makefile.cpp
echo cpp_land/%.f90: %.F90 >> Makefile.cpp
/bin/echo -e '\tcpp ${CPPDEFS} -C -v -I shared/include -o $@ $<' >> Makefile.cpp
mkdir -p cpp_land
foreach foo ( `find land_lad2 -type f -name \*.F90` )
  make -f Makefile.cpp cpp_land/$foo:t:r.f90
end
find cpp_land -type f -name \*.f90 > pathnames_land_lad2
        ]]></csh>

      </compile>
    </component>

    <component name="mom6" requires="fms ocean_shared" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/github_mirror">
        <codeBase version="$(MOM6_GIT_TAG)"> NULL </codeBase>
        <csh>
          git clone -b $(MOM6_GIT_TAG) http://gitlab.gfdl.noaa.gov/github_mirror/noaa-gfdl-mom6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6  tools/python/025gridGeneration/MIDAS
          git clone --recursive http://gitlab.gfdl.noaa.gov/github_mirror/noaa-gfdl-mom6.git src/MOM6
          git submodule update #This gets the right version of submodules
          popd

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" == "zeus.fairmont.rdhpcs.noaa.gov") then
            ln -s /scratch2/portfolios/GFDL/gfdlscr/John.Krasting/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f1/pdata/gfdl_O/datasets/ .datasets
          endif
          popd	  

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
        </csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -D_USE_GENERIC_TRACER -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>

    <component paths="ocean_shared" requires="fms" name="ocean_shared">
      <description domainName="Ocean Generic Tracers" communityName="GFDL-ocean-shared" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source>
        <codeBase version="$(RELEASE)"> ocean_shared </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) </cppDefs>
      </compile>
    </component>

    <component name="coupler" paths="coupler" requires="fms atmos_dyn atmos_phys land_lad2 ice_sis mom6 ocean_shared">
      <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(RELEASE)"> coupler.git </codeBase>
        <csh><![CDATA[
        ( cd coupler && git checkout user/cjg/awg_v20150416 )
        ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>
      </compile>
    </component>

  </experiment>

<!--============================-->
<!--= TEMPLATES FOR INPUT DATA =-->
<!--============================-->

  <experiment name="L48_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D48L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="L32_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D32L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awg/newland/initcond_with_newveg.remapped_to_c96_OM4_025.v20150120.tar</dataSource>-->
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C96L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150120.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awg/input/ic/c96L32_initcond.nc.tar</dataSource>-->
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C96L32_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150224.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c192L48_newLand20150302/awg_C192L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>-->
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C192L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c192L32_newLand20150302/awg_C192L32_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>-->
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C192L32_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p5">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p5_faero">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_faero</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="common_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/common/sea_esf_dec2014.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/lm3_data_20130815.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/aerosol_inputs.dec2009.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/RCP/cmip5_rcp45.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/tropchem_oct2011.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/megan2.1_input.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.1x1.1859_2020.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.simple.so2.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emis_fuel_aircraft.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.aircraft.aero.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/so2_0.25_volcanoes.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201503" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>

      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="common_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/common/sea_esf_dec2014.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/awg/input/lm3/lm3_data_20150322.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/aerosol_inputs.dec2009.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/RCP/cmip5_rcp45.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/tropchem_oct2011.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/megan2.1_input.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.1x1.1859_2020.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.simple.so2.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emis_fuel_aircraft.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.aircraft.aero.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/so2_0.25_volcanoes.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201503" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>

      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_faero</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="amip_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/sst/hadisst.186912-201401.tar</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_co2</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="climo_data">
    <input>
      <dataFile label="input" target="INPUT/hadisst_sst.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/sst.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/hadisst_ice.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/ice.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <!-- Repeat data_table_amip but not data_table_co2 -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
    </input>
  </experiment>


  <experiment name="c96_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awg/newland/19810101.static_veg.southshifted.remapped_to_c96_OM4_025.v20150120.tar</dataSource>-->
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/19810101.static_veg.southshifted.remapped_to_c96_OM4_025.v20150120.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c96_OM4_025_hydrography_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c96_OM4_025_grid_v20140620.tar</dataSource>
      </dataFile>
      <csh><![CDATA[
set domains_stack_size = "2097152"
if ( "$npes" == "432" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1" 
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "864" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "12,16";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "1728" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "6,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,16";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "1728"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,12"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,12"; set ice_io_layout   =  "1,4"
else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

  <experiment name="c96_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awg/newland/19810101.static_veg.southshifted.remapped_to_c96_OM4_025.v20150120.tar</dataSource>-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/fre/tikal/LM3/LM3p2_C96_CM2G_historical_HC1_quick/ncrc2.default-prod/static_veg/19810101.static_veg.lm3p2.remapped_to_c96_OM4_025.v20150322.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c96_OM4_025_hydrography_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c96_OM4_025_grid_v20140620.tar</dataSource>
      </dataFile>
      <csh><![CDATA[
set domains_stack_size = "2097152"
if ( "$npes" == "432" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1" 
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "864" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "12,16";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "1728" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "6,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,16";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "1728"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,12"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,12"; set ice_io_layout   =  "1,4"
else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

  <experiment name="c192_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/fre/siena_201211/LM3/LM3.0_C192_CM2.5FLOR_historical_HC1_southshifted/ncrc2.default-prod/static_veg/19810101.static_veg.remapped_to_C192_OM4_025_southshifted.v20150302.tar</dataSource>-->
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/19810101.static_veg.remapped_to_C192_OM4_025_southshifted.v20150302.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c192_OM4_025_hydrography_v20140708.tar </dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c192_OM4_025_grid_v20140708.tar</dataSource>
      </dataFile>
      <csh><![CDATA[
set domains_stack_size = "3097152"
set do_ocean = "false"
if ( "$npes" == "864" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "6,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "8"
  set fv_layout    =   "6,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"
else if ( "$npes" == "4608" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "12,16"; set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16"; set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "6912" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "8"
  set nxblocks = "2" ; set nyblocks = "4"
  set fv_layout    =   "12,12"; set fv_io_layout    =  "1,4"
  set land_layout  =   "12,12"; set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"

else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

<!--================================-->
<!--= TEMPLATES FOR POSTPROCESSING =-->
<!--================================-->

  <experiment name="c96_amip_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c96_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" cubicToLatLon="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c192_amip_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" cubicToLatLon="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c192_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

  <experiment name="c96L32_am4f5" inherit="cm4p5_v20150416">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)" 
communityModel="am4p5" 
communityModelID="am4p5"
communityExperimentName="$(name)" 
communityExperimentID="$(name)" >
<!-- /MDBI -->

AM4 prototype configuration "am4f5" from MDT Atmosphere Working Group.
Derived from "am4f4", but with code modifications from Paul Ginoux.

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4f5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4f5_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="2:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restarts">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L32_am4f5_faero" inherit="c96L32_am4f5">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)" 
communityModel="am4p5" 
communityModelID="am4p5"
communityExperimentName="$(name)" 
communityExperimentID="$(name)" >
<!-- /MDBI -->

Based on c96L32_am4f5_faero but with Paul Ginoux' fast aerosols.

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <!-- Modified namelists -->
      <namelist name="aerosol_nml">
    family_names = "small_dust", "large_dust", "black_carbon","organic_carbon", "sea_salt", "sulfate", "aerosol", "pm2.5", "dust", "POA"
    in_family1 = T,F,F,F,F,F,F,F,F,F,
    in_family2 = F,T,F,F,F,F,F,F,F,F,
    in_family3 = F,F,F,F,F,F,T,T,F,F,
    in_family4 = F,F,F,F,F,F,F,F,T,T,
    in_family5 = F,F,F,T,T,T,F,F,F,F,
    in_family6 = F,F,T,F,F,F,F,F,F,F,
    in_family7 = T,T,T,T,T,T,T,T,T,T,
    in_family8 = T,F,T,T,T,F,T,T,T,T,
    in_family9 = T,T,F,F,F,F,F,F,F,F,
    in_family10= F,F,F,F,F,F,F,F,T,T,
    aerosol_data_source = "predicted"
      </namelist>
      <namelist name="carbon_aerosol_nml">
      bcff_source = 'gocart_2007',
        bcff_input_name(1)='anthro',
        bcff_filename='emissions.bc.1x1.1859_2020.nc',
        bcff_time_dependency_type='time_varying',bcff_dataset_entry=$baseDate
      omff_source = 'gocart_2007',
        omff_input_name(1)='anthro',
        omff_filename='emissions.om.1x1.1859_2020.nc',
        omff_time_dependency_type='time_varying',omff_dataset_entry=$baseDate
      omsh_source = 'gocart_2007',
        omsh_input_name(1)='ship',
        omsh_filename='emissions.om.1x1.1859_2020.nc',
        omsh_time_dependency_type='time_varying',omsh_dataset_entry=$baseDate
      bcsh_source = 'gocart_2007',
        bcsh_input_name(1)='ship',
        bcsh_filename='emissions.bc.1x1.1859_2020.nc',
        bcsh_time_dependency_type='time_varying',bcsh_dataset_entry=$baseDate
      bcav_source = 'do_aircraft'
        bcav_input_name(1)='fuel',
        bcav_filename='emissions.aircraft.aero.1x1.1859_2020.nc',
        bcav_time_dependency_type='time_varying',bcav_dataset_entry=$baseDate
      bcbb_source = 'AEROCOM',
        bcbb_filename='emissions.bc.1x1.1859_2020.nc',
        bcbb_input_name(1)='bb_l1'
        bcbb_input_name(2)='bb_l2'
        bcbb_input_name(3)='bb_l3'
        bcbb_input_name(4)='bb_l4'
        bcbb_input_name(5)='bb_l5'
        bcbb_input_name(6)='bb_l6'
        bcbb_time_dependency_type='time_varying',bcbb_dataset_entry=$baseDate
      ombb_source = 'AEROCOM',
        ombb_filename='emissions.om.1x1.1859_2020.nc',
        ombb_input_name(1)='bb_l1'
        ombb_input_name(2)='bb_l2'
        ombb_input_name(3)='bb_l3'
        ombb_input_name(4)='bb_l4'
        ombb_input_name(5)='bb_l5'
        ombb_input_name(6)='bb_l6'
        ombb_time_dependency_type='time_varying',ombb_dataset_entry=$baseDate
      omna_source = 'gunther',
        omna_filename='oc8_natural_emission.nc'
        omna_input_name='omemisnat'
      omss_source = 'ODowd'
        omss_coef = 0.05
      soa_source = 'add_soa'
        gas_conc_name='C4H10',soa_filename ='gas_conc_3D_am3p9.nc',
        soa_time_dependency_type='constant'
      </namelist>
      <namelist name="dust_nml">
      dust_source_name = 'source',
      dust_source_filename = 'dust_source_Iceland_1x1.nc'
      uthresh = 3.5
      coef_emis = 2.5e-10
      </namelist>
      <namelist name="simple_sulfate_nml">
        gas_conc_filename='gas_conc_3D_am3p9.nc'
        gas_conc_time_dependency_type='constant'
        cont_volc_source='do_cont_volc'
        expl_volc_source='do_expl_volc'
          aerocom_emission_filename='so2_0.25_volcanoes.nc'
        aircraft_source='do_aircraft',
          aircraft_filename='emis_fuel_aircraft.1859_2010.nc',
          aircraft_emission_name(1)='fuel'
          so2_aircraft_EI=0.001
          aircraft_time_dependency_type='time_varying',aircraft_dataset_entry=$baseDate
        anthro_source='do_anthro',
          anthro_emission_name(1)='so2ff',
          anthro_emission_name(2)='so4ff',
          anthro_filename='anthro_so2.1859_2010.nc',
          anthro_time_dependency_type='time_varying',anthro_dataset_entry=$baseDate
        biobur_source='do_biobur',
          biobur_emission_name(1)='so2bb',
          biobur_emission_name(2)='so4bb',
          biobur_filename='anthro_so2.1859_2010.nc',
          biobur_time_dependency_type='time_varying',biobur_dataset_entry=$baseDate
        cloud_chem_solver="f1p"
        pH_cloud=4.5
      </namelist>
      <namelist name="ssalt_nml">
     coef_emis_fine=2., coef_emis_coarse=2.,
      </namelist>
      <namelist name="uw_conv_nml">
        use_online_aerosol = .true.,
        iclosure        = 0,
        rkm_sh1         = 15.0,
        rkm_sh          = 3.0,
        cldhgt_max      = 50.e3,
        do_uwcmt        = .false.,
        apply_tendency  = .true.,
        wmin_ratio      = 0.05,
        do_lands        = .false.
        landfact_m      = 0.5
        lochoice        = 0
        lofactor0       = 0.75
        do_deep         = .true.,
        idpchoice       = 2
        do_rescale      = .true.
        use_sub_seasalt = .false.
        use_new_let     = .true.
        plev_cin        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        duration        = 10800
        do_stime        = .false.
        do_dtime        = .false.
        stime0          = 0.8
        dtime0          = 0.1
        do_prog_tke     = .false.
        tau_tke         = 7200
        bfact           = 0.05
        pblrat0         = 2.0
        do_prog_gust    = .true.
        tau_gust        = 10800
        gfact           = 1.0
        do_gust_qt      = .false.
        gqt_choice      = 0
        cgust0          = 2.
        cgust_max       = 4.
        sigma0          = 0.5
        tracer_check_type = 1
      </namelist>

      <!-- Modified input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_faero</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>

  </experiment>

  <experiment name="c96L32_am4f5_faero_lm3p2sosn" inherit="c96L32_am4f5_faero">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)" 
communityModel="am4p5" 
communityModelID="am4p5"
communityExperimentName="$(name)" 
communityExperimentID="$(name)" >
<!-- /MDBI -->

Same as c96L32_am4f5_faero, except it uses lm3p2 settings, initial conditions, and 
static vegetation with the exception of leaf optical properies as c96L32_am4f5_faero,
and water interception parameters from ESM2Mb. Snow interception parameters are
as in lm3p1 (Milly et al., 2014)

    </description>

    <input>
      <!-- Modified namelists -->
      <namelist name="cana_nml">
       turbulence_to_use = "lm3v"
       init_co2 = 286.0e-6
       canopy_air_mass_for_tracers = 10.0
       allow_small_z0 = .true.
      </namelist>
      <namelist name="glac_data_nml">
       use_lm2_awc = .true., 
       rsa_exp_global = 10.,
       f_iso_cold = 0.92, 0.58
       f_vol_cold = 0.06, 0.08
       f_geo_cold = 0.00, 0.00
       f_iso_warm = 0.92, 0.58
       f_vol_warm = 0.06, 0.08
       f_geo_warm = 0.00, 0.00
       dat_emis_dry = 1., 
       dat_emis_sat = 1.,
       geothermal_heat_flux_constant = 0.065
      </namelist>
      <namelist name="glac_nml">
       conserve_glacier_mass = .true.
       lm2 = .true.
       albedo_to_use = 'brdf-params'
      </namelist>
      <namelist name="harvesting_nml">
       do_harvesting          = .FALSE.
       grazing_intensity      = 0.25
       grazing_residue        = 0.1
       frac_wood_wasted_harv  = 0.25
       frac_wood_wasted_clear = 0.25
       !frac_wood_fast         = ONETHIRD
       !frac_wood_med          = ONETHIRD
       !frac_wood_slow         = ONETHIRD
       crop_seed_density      = 0.1
       waste_below_ground_wood = .TRUE.
      </namelist>
      <namelist name="lake_data_nml">
       lake_to_use = 'from-rivers'
       lake_specific_width = .false.
       large_lake_sill_width = 800.
       num_l = 20,
       dat_emis_dry = 1.,
       dat_emis_sat = 1.,
       dat_heat_capacity_ref = 0.,
       f_iso_liq = 0.025, 0.01
       f_iso_ice = 0.025, 0.01
       f_vol_liq = 0., 0.
       f_vol_ice = 0., 0.
       f_geo_liq = 0., 0.
       f_geo_ice = 0., 0.
       dry_lake_depth_frac = 0.5
       dat_z0_momentum(1)     = 1.4e-4
       dat_z0_momentum_ice(1) = 1.4e-4
       k_over_B_ice           = 0.25
       geothermal_heat_flux_constant = 0.065
      </namelist>
      <namelist name="lake_nml">
       albedo_to_use = 'brdf-params'
       float_ice_to_top = .true.
       lake_depth_max = 1.e10
       max_plain_slope = 16.e-5
       K_z_background  = 15.e-5
      </namelist>
      <namelist name="landuse_nml">
       do_landuse_change = .FALSE.
       input_file = 'INPUT/landuse.nc'
      </namelist>
      <namelist name="river_nml">
       dt_slow     = 86400.
       land_area_called_cellarea = .true.
       all_big_outlet_ctn0 = .true.
       ave_DHG_exp = 0.55, 0.45, 0.0
       ave_DHG_coef = 7.5, 0.3, 0.444444444
       ave_AAS_exp = 0.26, 0.40, 0.34
      </namelist>
      <namelist name="river_physics_nml">
       lake_sfc_w_min = 1.
       prohibit_cold_ice_outflow = .FALSE.
      </namelist>
      <namelist name="snow_data_nml">
       emis_snow_max = 1.
       emis_snow_min = 1.
       z0_momentum = 0.01
       num_l = 5
       dz = 0.05, 0.2, 0.5, 0.2, 0.05, 0.0, 0.0, 0.0, 0.0, 0.0
       f_iso_cold = 0.92, 0.58
       f_vol_cold = 0.06, 0.08
       f_geo_cold = 0.00, 0.00
       f_iso_warm = 0.92, 0.58
       f_vol_warm = 0.06, 0.08
       f_geo_warm = 0.00, 0.00
       depth_crit = 0.05
       thermal_cond_ref = 0.09
      </namelist>
      <namelist name="snow_nml">
       min_snow_mass = 1.e-7
       albedo_to_use = 'brdf-params'
       snow_density = 250.
      </namelist>
      <namelist name="soil_data_nml">
       geohydrology_to_use    = 'hill'
       use_comp_for_ic        = .true.
       use_tau_fix            = .false.
       use_sat_fix            = .true.
       use_alt3_soil_hydraulics = .true.
       gw_scale_soil_depth  = 0.1666667
       gw_scale_perm        = 1.0
       gw_scale_relief      = 0.5
       aspect           = 0.01
       k0_macro_z       = 0.0
       k0_macro_x       = 1.0
       freeze_factor    = 2.0
       comp             = 1e-4
       num_l            = 20
       dz = 0.020, 0.040, 0.040, 0.050, 0.05, 0.100, 0.10, 0.200, 0.200, 0.2, 
            0.40,  0.40,  0.40,  0.4,   0.4,   1.0,   1.0,  1.0,  1.5,   2.5
       dat_emis_dry        = 1., 1., 1., 1., 1., 1., 1., 1., 1.
       dat_emis_sat        = 1., 1., 1., 1., 1., 1., 1., 1., 1.
       dat_tf_depr         = 2., 2., 2., 2., 2., 2., 2., 2., 2.
       dat_w_sat(1:7)      =  .421,  .439,  .468,  .430,  .444,  .454,  .443
       dat_k_sat_ref(1:7)  =  .014, .0034,.00097, .0069, .0037, .0018, .0036
       dat_psi_sat_ref(1:7)= -.036,  -.35,  -.47,  -.11,  -.13,  -.41,  -.18
       dat_chb(1:7)        =   4.3,   5.2,   12.,   4.8,   7.9,   8.4,   7.0
       Dpsi_min_const      = -1.e12
       K_min               = 1.e-12
       geothermal_heat_flux_constant = 0.065
       retro_a0N1 = .true.
      </namelist>
      <namelist name="soil_nml">
       init_wtdep    = 10.
       albedo_to_use = 'brdf-maps'
       uptake_to_use = 'darcy2d-linearized'
       uptake_oneway = .true.
       active_layer_drainage_acceleration = 1.
       gw_flux_max   = 0.001
       lrunf_from_div = .false.
       cold_infilt   = .false.
       use_depth_to_wt_4 = .true.
       layer_for_gw_switch = 16
       bottom_up_cold_infilt = .true.
       cold_depth = 3.0
       bwood_macinf = 1.
       allow_neg_wl = .true.
       prohibit_negative_water_div = .true.
      </namelist>
      <namelist name="vegn_data_nml">
       vegn_to_use = 'uniform'
       K1=10,
       K2=0.1,
       fsc_liv=0.9,
       fsc_wood=0.45,
       c1(4) = 0.3
       c2(4) = 0.3
       Vmax = 2.0E-5, 2.0E-5, 2.0E-5, 2.0E-5, 1.50E-5,
       m_cond = 4., 9., 9., 7., 7.,
       alpha_phot = 0.05, 0.06, 0.06, 0.06, 0.06,
       gamma_resp = 0.03, 0.02, 0.02, 0.02, 0.02,
       tc_crit(0:2) = 3*273.16
       fact_crit_phen(0:4) = 0., 0., 0., 0., 0.
       fact_crit_fire(0:4) = 0., 0., 0., 0., 0.
       cnst_crit_phen(0:4) = 0.30, 0.15, 0.15, 0.30, 0.30
       cnst_crit_fire(0:4) = 0.15,  0.40, 0.15, 0.15, 0.15
       wet_leaf_dreg(0:4)  = .3, .3, .3, .3, .3
       ksi =  0, 0, 0, 0, 0,
       leaf_refl(0:4,1) = 0.11, 0.11, 0.10, 0.10, 0.10
       leaf_refl(0:4,2) = 0.58, 0.58, 0.45, 0.45, 0.50,
       dat_root_zeta(0:4) =   0.35212, 0.17039, 0.28909, 0.25813, 0.17039
       critical_root_density = 0.0,
       tau_drip_s     = 259200.0
       cmc_lai(0:4) = 0.02, 0.02, 0.02, 0.02, 0.02
       csc_lai(0:4) = 0.30, 0.30, 0.30, 0.30, 0.60
       dat_snow_crit = 4*1.e7, .1
       t_transp_min = 268.
       srl(0:1) = 112.0e3, 150.0e3
       root_perm = 14*5e-7
       alpha(1,3) = 4 
       leaf_age_tau(2) = 150
       smoke_fraction = 0.9, 0.9, 0.6, 0.6, 0.6
       tg_c3_thresh = 1
       phen_ev1 = 0.2
       phen_ev2 = 0.7
       cmc_eps = 0.01
       alpha(0:4,6) = 0.0, 0.0, 0.012, 0.012, 0.012
       treefall_disturbance_rate = 0.175, 0.185, 0.025, 0.0275, 0.027
      </namelist>
      <namelist name="vegn_nml">
       init_Tv = 288.0
       rad_to_use = 'two-stream'
       photosynthesis_to_use = 'leuning'
       snow_rad_to_use = 'paint-leaves'
       co2_to_use_for_photosynthesis ='interactive'
       co2_for_photosynthesis = 286.0e-6
       do_cohort_dynamics   = .TRUE.,              
       do_patch_disturbance = .TRUE.,              
       do_phenology         = .TRUE.,              
       do_biogeography      = .TRUE.,              
       do_seed_transport    = .TRUE.,
       tau_smooth_ncm = 22.0
       rav_lit_bwood = 300.
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/awg/IC/awg_C96L32_LM3_OM4_025_grid_lm3p2_19810101.remapped.v20150322.tar</dataSource>
      </dataFile>
    </input>
  </experiment>


  <experiment name="c96L32_am4f5_faero_lm3p2sosn_mizf4r3" inherit="c96L32_am4f5_faero_lm3p2sosn">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)" 
communityModel="am4p5" 
communityModelID="am4p5"
communityExperimentName="$(name)" 
communityExperimentID="$(name)" >
<!-- /MDBI -->

Same as c96L32_am4f5_faero_lm3p2sosn, except it use namelists of am4f4r3 from Ming Zhao
    </description>

    <input>
      <!-- Modified namelists -->
      <namelist name="entrain_nml">
        convect_shutoff = .false.,
        apply_entrain = .true.,
        parcel_buoy   = 0.25,
        parcel_option = 2,
        beta_rad      = 0.48,
        Ashear        = 25.0, 
        radperturb    = 0.10, 
        critjump      = 0.10,
      </namelist>
      <namelist name="mg_drag_nml">
        gmax  = 1.5,
        acoef = 1.,
        do_conserve_energy = .true.,
        source_of_sgsmtn = 'input/computed'
      </namelist> 
      <namelist name="cloud_generator_nml">
        do_inhomogeneous_clouds = .true.
        defaultOverlap = 4
        overlapLengthScale = 4.
      </namelist>
      <namelist name="deep_conv_nml">
        auto_th0_d = 0.2e-3
        tcrit_d    = -40.0,
        peff_l_d   = 5.0e-5
        peff_i_d   = 10.e-5
        rkm_dp1 = 1.5
        rkm_dp2 = 0.001
        norder  = 1
        crh_th_ocean = 0.5
        crh_th_land  = 0.5
        cin_th = 5.
        cape_th = 10.
        cwfn_th = 10.
        frac_rkm_pert = 0.
        tau_dp = 28800.
        tau_dp_fact = 3.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 5.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.9
        pblfac_d   = 0.25
        ffldep_d   = 0.
        frac_limit_d = 0.25
        dcapedm_th = 100
        dcwfndm_th = 100
        lofactor_d = 0.5
        do_lod_rkm   = .false.
        do_lod_cfrac = .false.
        do_lod_tcrit = .false.
        do_stochastic_rkm =.false.
        do_cgust_dp  = .true.
        cgust_choice = 3
        cin_fact  = 1.
        do_forcedlifting_d = .false.
        wcrit_min_gust = 0.2
        do_forced_conv = .false.
      </namelist>
      <namelist name="uw_closure_nml">
        do_old_cbmfmax = .false.,
        rkfre    = 0.2
        wcrit_min= 0.2
      </namelist>
      <namelist name="uw_conv_nml">
        use_online_aerosol = .true.,
        iclosure        = 0,
        rkm_sh1         = 15.0,
        rkm_sh          = 3.0,
        cldhgt_max      = 50.e3,
        do_uwcmt        = .false.,
        apply_tendency  = .true.,
        wmin_ratio      = 0.05,
        do_lands        = .false.
        landfact_m      = 0.5
        lochoice        = 0
        lofactor0       = 0.75
        do_deep         = .true.,
        idpchoice       = 2
        do_rescale      = .true.
        use_sub_seasalt = .false.
        use_new_let     = .true.
        do_subcloud_flx = .true.
        plev_cin        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        duration        = 10800
        do_stime        = .false.
        do_dtime        = .false.
        stime0          = 0.8
        dtime0          = 0.1
        do_prog_tke     = .false.
        tau_tke         = 7200
        bfact           = 0.05
        pblrat0         = 2.0
        do_prog_gust    = .true.
        tau_gust        = 10800
        gfact           = 1.0
        do_gust_qt      = .false.
        gqt_choice      = 0
        cgust0          = 2.
        cgust_max       = 4.
        sigma0          = 0.5
        tracer_check_type = 1
      </namelist>
      <namelist name="uw_plume_nml">
        auto_th0 = 0.2e-3,
        tcrit    = -40.0,
        peff_l   = 5.0e-5
        peff_i   = 10.e-5
        rmaxfrac = 0.15
        frac_drs = 0.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3 
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 2
        mp_choice = 2
        do_pevap = .true.
        cfrac    = 0.15
        hcevap   = 0.9
        pblfac   = 0.25
      </namelist>
      <namelist name="strat_cloud_nml">
        use_online_aerosol = .true.,
        U00 = 0.80,
        U00_profile = .true.,
        rthresh = 8.0,
        Dmin = 1.0e-07,
        n_land = 150.e6,
        n_ocean = 50.e6,
        diff_thresh = 0.1,
        mc_thresh = 0.001,
        eros_scale = 1.e-6,
        eros_choice = .true.,
        eros_scale_c = 3.e-5,
        eros_scale_t = 5.e-5,
        super_choice = .true.,
        tracer_advec = .true.
        vfact = 1.0
        cfact = 1.0
        do_liq_num = .true.
        use_kk_auto = .false.
        var_limit = 0.3
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        use_sub_seasalt = .false.
        aerosol_activation_scheme = "total"
      </namelist>
      <namelist name="wetdep_nml">
        scale_aerosol_wetdep = 1.
      </namelist>
    </input>
  </experiment>


<!--=====================-->
<!--= CLIMO EXPERIMENTS =-->
<!--=====================-->

  <experiment name="c96L32_am4f5_2000climo" inherit="cm4p5_v20150416">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)" 
communityModel="am4p5" 
communityModelID="am4p5"
communityExperimentName="$(name)" 
communityExperimentID="$(name)" >
<!-- /MDBI -->

Same model as c96L32_am4f5, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario 
      communityForcing="N/A"
      startTime="$(EXP_CLIMO_START)"
      endTime="$(EXP_CLIMO_END)" 
      parentExperimentID="N/A" 
      parentExperimentRIP="N/A" 
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4f5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4f5_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="2:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L32_am4f5_1860climo" inherit="c96L32_am4f5_2000climo">
    <description>
Same model as c96L32_am4f5_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4f5_2000aero" inherit="c96L32_am4f5_2000climo">
    <description>
Same model as c96L32_am4f5_2000climo, but
configuration with present-day climatological SSTs, pre-industrial GHGs and present-day aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4f5_2000climo_p2K" inherit="c96L32_am4f5_2000climo">
    <description>
Same model as c96L32_am4f5_2000climo, but
configuration with present-day climatological SSTs + 2K, present-day GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo_p2K.nml"/>
    </input>
  </experiment>

</experimentSuite>
