<?xml version="1.0"?>

<!-- GFDL Model Development Team (MDT) documentation: http://cobweb.gfdl.noaa.gov/~niz/mdt/ -->
<!-- GFDL MDT Atmosphere Working Group (AWG) documentation: http://cobweb.gfdl.noaa.gov/~cjg/awg/ -->

<!-- Model configurations in support of MDT Atmosphere Working Group (AWG), v20150901 revision -->

<!-- QUICK START GUIDE:

# To checkout this xml (you should have done this already)
# .. module load fre/bronx-10
# .. module load git
# .. mkdir -p $home/awg/ulm_201505
# .. cd $home/awg/ulm_201505
# .. git clone -b awg_v20150901a http://gitlab.gfdl.noaa.gov/mdt/xml.git xml_v20150901
# .. cd xml_v20150901

# Change YOURGROUPLETTER to your group, such as f, w, o...
      <project>gfdl_YOURGROUPLETTER</project>

# To check out source code and compile:
# .. module load fre/bronx-10
# .. fremake -x awg.xml -p ncrc2.intel -t openmp cm4p5_v20150901

# To run regression test:
# .. frerun -s -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r5

# To run a complete experiment (with automated database entry if MDBIswitch in "on"):
# .. frerun -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r5

# To run fredb after an experiment is finished to manually add it to the database:
# .. fredb-pp -x awg.xml -p gfdl.ncrc2-intel -t openmp c96L32_am4g5r5

-->

<!-- LIST OF AUTOMATED TESTS TO BE PERFORMED WITH JENNY
     Notes: Only fremake and frerun are currently supported.
            FRE commands listed should NOT include -s option to
            automatically sumbit jobs.

jenny> fremake -x awg.xml -p ncrc2.intel -t openmp cm4p5_v20150901
jenny> fremake -x awg.xml -p ncrc2.intel -t debug cm4p5_v20150901

jenny> frerun -r debug -x awg.xml -p ncrc2.intel -t debug c96L32_am4g5r1

jenny> frerun -r basic,restart,scaling -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r1
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L48_am4g5r1
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r1_fullaero
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L48_am4g5r1_fullaero
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L48_am4g5r1_fullchem

jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r1_2000climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r1_1860climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r1_2000aero
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r1_2000climo_p2K

jenny> frerun -r basic,restart,scaling -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r1
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r1_2000climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r1_1860climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r1_2000aero
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r1_2000climo_p2K

jenny> frerun -r basic,restart,scaling -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r2
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r2_2000climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r2_1860climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r2_2000aero
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r2_2000climo_p2K

jenny> frerun -r basic,restart,scaling -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r2
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c192L32_am4g5r2_2000climo

jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r4
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r4_2000climo

jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r5
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5r5_2000climo

jenny> frerun -r basic,restart,scaling -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5_tkepbl
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5_tkepbl_2000climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5_tkepbl_1860climo
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5_tkepbl_2000aero
jenny> frerun -r basic -x awg.xml -p ncrc2.intel -t openmp c96L32_am4g5_tkepbl_2000climo_p2K

! Reference results for automated tests. Jenny will verify the sha1 checksum of of the
! diag-integral.out ascii file against the checksums listed below. The checksum
! can be computed with the 'taverage' AWG utility.

ref> c96L32_am4g5r1/ncrc2.intel-debug/0m2d                          cf874083a862127cb312dc7a1c8d36d5a9b1ef01

ref> c96L32_am4g5r1/ncrc2.intel-prod-openmp/0m8d                    2a3f3e30bf9fc679d278a588aad1814500880edd
ref> c96L48_am4g5r1/ncrc2.intel-prod-openmp/0m8d                    1428c6585657075c2e061f83472e7f8ca8484243
ref> c96L32_am4g5r1_fullaero/ncrc2.intel-prod-openmp/0m8d           a410a9f96ccfdc2a3741981ade2db94a5446467f
ref> c96L48_am4g5r1_fullaero/ncrc2.intel-prod-openmp/0m8d           7c3af494e98506de22e93146e0fb11eae636e513
ref> c96L48_am4g5r1_fullchem/ncrc2.intel-prod-openmp/0m8d           fc50cbd4baa17ccbabf8412b73031e716124385b

ref> c96L32_am4g5r1_2000climo/ncrc2.intel-prod-openmp/0m8d          b614e2248eb3aa261a95610e4bbcf02a9ee4b474
ref> c96L32_am4g5r1_1860climo/ncrc2.intel-prod-openmp/0m8d          4c990eaef84ee04d9a84bfe1270312fc961c483a
ref> c96L32_am4g5r1_2000aero/ncrc2.intel-prod-openmp/0m8d           0d37dddf4e2292eac8b2307eda6ba78d593c554a
ref> c96L32_am4g5r1_2000climo_p2K/ncrc2.intel-prod-openmp/0m8d      d5d2f886e1ffa10ccf89e9fe00a4a307d246ca6a

ref> c192L32_am4g5r1/ncrc2.intel-prod-openmp/0m8d                   0a6e9b6334d50e1b5fdc360adf4fc997e3b8b23e
ref> c192L32_am4g5r1_2000climo/ncrc2.intel-prod-openmp/0m8d         ea7adb906be1180639b4490980995157c2c8af3a
ref> c192L32_am4g5r1_1860climo/ncrc2.intel-prod-openmp/0m8d         ce4aec837817a5ce0fe744f5f767c40299fb4511
ref> c192L32_am4g5r1_2000aero/ncrc2.intel-prod-openmp/0m8d          a2eab99fd321e092d4e68892505314a15ad5f03f
ref> c192L32_am4g5r1_2000climo_p2K/ncrc2.intel-prod-openmp/0m8d     71e66d1066875965363de87b5ced2459b3024db3

ref> c96L32_am4g5r2/ncrc2.intel-prod-openmp/0m8d                    81b303da7b0b8273f384048270358bda25eb37f3
ref> c96L32_am4g5r2_2000climo/ncrc2.intel-prod-openmp/0m8d          c23eee927a9b1da73c41977b917574a0c501fb43
ref> c96L32_am4g5r2_1860climo/ncrc2.intel-prod-openmp/0m8d          06b25e0567b891ca7e968236d8e071c6c70fb3dd
ref> c96L32_am4g5r2_2000aero/ncrc2.intel-prod-openmp/0m8d           b865fccb9e72dbd9f0c29db753723448058c675a
ref> c96L32_am4g5r2_2000climo_p2K/ncrc2.intel-prod-openmp/0m8d      fd453ce6617ee5522e65893df2c973901be29d69

ref> c192L32_am4g5r2/ncrc2.intel-prod-openmp/0m8d                   ee92286829d1e2e4ed632faacc85195ba668449d
ref> c192L32_am4g5r2_2000climo/ncrc2.intel-prod-openmp/0m8d         f1a3763d79028025141234ab79d45d3a4fedce7a

ref> c96L32_am4g5r4/ncrc2.intel-prod-openmp/0m8d                    b275686944e0cc4cbddcf5860c3b4120fd89531a
ref> c96L32_am4g5r4_2000climo/ncrc2.intel-prod-openmp/0m8d          321e67a3d460755e8cd4df6525ce1e1b19201508

ref> c96L32_am4g5r5/ncrc2.intel-prod-openmp/0m8d                    47bf738deb611ae370848b7b9bbd7c9b0cead97a
ref> c96L32_am4g5r5_2000climo/ncrc2.intel-prod-openmp/0m8d          1ba0082ad289d2fe0ba40f7f55f7cfea6de317b4

ref> c96L32_am4g5_tkepbl/ncrc2.intel-prod-openmp/0m8d               36ca0dcfdc2ad7c2b1c503089ce62f72fb181da3
ref> c96L32_am4g5_tkepbl_2000climo/ncrc2.intel-prod-openmp/0m8d     b974648c60a862d836bece1e2d3badacd288ac52
ref> c96L32_am4g5_tkepbl_1860climo/ncrc2.intel-prod-openmp/0m8d     ab68a3c3e199a2a468baf2aaad14dfaa36bb9ce4
ref> c96L32_am4g5_tkepbl_2000aero/ncrc2.intel-prod-openmp/0m8d      39a685cfd6fd3dee4b5461d637dd1c0e39ed5bcf
ref> c96L32_am4g5_tkepbl_2000climo_p2K/ncrc2.intel-prod-openmp/0m8d c77d1def41a8bf4307489ed297fe7028b31048ce

-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2003/XInclude">

  <property name="RELEASE" value="ulm_201505"/>                    <!-- base code release -->
  <property name="MOM6_DATE" value="2015.05.19"/>                  <!-- git tag date for MOM6 source code -->
  <property name="MOM6_GIT_TAG" value="dev/master/$(MOM6_DATE)"/>  <!-- git tag for MOM6 source code -->
  <property name="AWG_GIT_TAG" value="awg_v20150901"/>             <!-- git tag for AWG source code -->
  <property name="AWG_VERSION" value="v20150901"/>                 <!-- AWG source code version -->
  <property name="FRE_STEM" value="awg/$(RELEASE)"/>
  <property name="FRE_VERSION" value="fre/bronx-10"/>
  <property name="ANALYSIS_SWITCH" value="on"/>
  <property name="MDBIswitch" value="off"/>                        <!-- on/off switch for MDBI database -->
  <property name="ProjectID" value="AWG"/>                         <!-- database top level -->

  <property name="AWG_INPUT_HOME_GAEA" value="$HOME/$(FRE_STEM)/xml_$(AWG_VERSION)/awg_include"/>
  <property name="AWG_INPUT_HOME_GFDL" value="/home/$USER/ncrc/$(FRE_STEM)/xml_$(AWG_VERSION)/awg_include"/>

<!--
GFDL FAIR USE POLICY

GFDL recognizes the essential nature of collaboration in the scientific
enterprise, including the importance of novel application and analysis of our
models. In order to maximize mutual benefit from collaboration, the use of
experimental GFDL models** should be done in a manner that ensures that
individuals involved in model development receive proper credit for their
work; in order to minimize the potential for misapplication of experimental
models, collaborations should actively engage model developers. Publication of
results using experimental GFDL models should be done in consultation with
scientists that participated in the model development. Consultation with GFDL
model developers should occur before submission of publications based on
experimental GFDL models, and should include agreement on the appropriate level
of acknowledgment, co-authorship and participation by the model developers.
Since experimental models have not been thoroughly vetted, experimental GFDL
models and their output should be distributed only after consultation with the
developers of the model. After a GFDL model has been described in a
peer-reviewed publication it is no longer experimental, and results based on
the model should cite the publication(s) describing the model.

** "Experimental GFDL models" refers to models (e.g., a coupled climate model),
model components (e.g., parameterization schemes), model configurations (e.g.,
the specific arrangement and parameter settings of model components) arising
from model development efforts at GFDL, but whose formulation and configuration
have not yet been documented in the peer-reviewed literature, as well as outputs
from integrations with these models.
-->

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

<!--
AMIP simulations are configured to start in 1980 with the first year being a
spin-up year. Postprocessing and analysis are performed starting in 1981. The
length of the simulation and analysis period can be controlled by changing
properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_AMIP_START" value="1980"/>
  <property name="EXP_AMIP_END"   value="2000"/>
  <property name="EXP_AMIP_LEN"   value="21"/>
  <property name="ANA_AMIP_START" value="1981"/>
  <property name="ANA_AMIP_END"   value="2000"/>
  <property name="ANA_AMIP_LEN"   value="20yr"/>

  <!-- Post-processing chunk length -->
  <!-- ANA_AMIP_LEN must be an integer multiple of PP_AMIP_CHUNK -->
  <property name="PP_AMIP_CHUNK" value="5yr"/>

<!--=====================================-->
<!--= RFP, CESS SENSITIVITY EXPERIMENTS =-->
<!--=====================================-->

<!--
Experiments to compute RFP (Radiative Flux Perturbation) and Cess sensitivity
were originally configured by Larry Horowitz. Experiments are configured to
start in year 0001, postprocessing and analysis are performed starting from
the second year (0002). The length of the simulation and analysis period can
be controlled by changing properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_CLIMO_START" value="0001"/>
  <property name="EXP_CLIMO_END"   value="0011"/>
  <property name="EXP_CLIMO_LEN"   value="11"/>
  <property name="ANA_CLIMO_START" value="0002"/>
  <property name="ANA_CLIMO_END"   value="0011"/>
  <property name="ANA_CLIMO_LEN"   value="10yr"/>
  <property name="PP_CLIMO_CHUNK"  value="5yr"/>

<!--=================-->
<!--= CHANGING NPES =-->
<!--=================-->

<!--
This xml includes a number of predefined options for the number of PEs.
Changing the number of PEs can be accomplished by simply
modifying 'npes' and segment 'runTime' in the xml <production> block:

      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>

Choosing a particular PE number is a balancing act. The higher npes,
the faster the model throughput, but also the lower the model efficiency
(i.e. the overall simulation will cost more in terms of core hours).

Available options for c96L32:
"""""""""""""""""""""""""""""

  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |
  |  npes  |    am4g5r1                                  |
  +========+=============================================+
  |   432  |    05:00:00                                 |
  |   864  |    03:00:00                                 |
  |  1152  |    02:30:00                                 |
  |**1728**|    01:20:00                                 |
  |  2304  |    01:15:00                                 |
  |  3456  |    01:00:00                                 |
  |  4608  |    01:00:00                                 |
  |  6912  |    01:00:00                                 |
  +========+======================+======================+

Available options for c192L32:
""""""""""""""""""""""""""""""

  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |
  |  npes  |    am4g5r1                                  |
  +========+=============================================+
  |   864  |    14:00:00                                 |
  |  1152  |    11:00:00                                 |
  |  2304  |    06:00:00                                 |
  |  3456  |    04:00:00                                 |
  |**4608**|    03:00:00                                 |
  |  6912  |    03:00:00                                 |
  +========+======================+======================+

**Note:** default settings are highlighted in **bold**. Suggested
run time values may need to be adjusted for your specific
configuration.

-->

  <setup>

<!-- MDBI -->
    <fmsRelease>fmsversion</fmsRelease>
<!-- /MDBI -->

    <platform name="ncrc2.intel">
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>gfdl_YOURGROUPLETTER</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/xml_$(AWG_VERSION)/scripts/$(platform)-$(target)</scripts>
         <stdout>/lustre/f1/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g -traceback"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f1/unswept/Chris.Golaz/archive/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"    value="/lustre/f1/pdata/gfdl_M"/>

      <csh><![CDATA[
        source $MODULESHOME/init/csh

        module use -a /ncrc/home2/fms/local/modulefiles
        module unload PrgEnv-pgi PrgEnv-pathscale PrgEnv-intel PrgEnv-gnu PrgEnv-cray
        module unload netcdf fre
        module load PrgEnv-intel/4.0.46
        module swap intel intel/12.1.3.293
        module load $(FRE_VERSION)
        module load git

        setenv KMP_STACKSIZE 512m
        setenv NC_BLKSZ 1M
        setenv F_UFMTENDIAN big
      ]]></csh>
    </platform>

    <platform name="gfdl.ncrc2-intel">
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive>
        <analysis>/nbhome/$USER/$(stem)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML"/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="LWH_ARCHIVE_ROOT"    value="/archive"/>
      <csh><![CDATA[
        source $MODULESHOME/init/csh
        module use -a /home/fms/local/modulefiles
        module purge
        module load $(FRE_VERSION)
        module load fre-analysis
        module load git
        ]]>
      </csh>
    </platform>

  </setup>

<!--===========-->
<!--= COMPILE =-->
<!--===========-->

  <!--The property MOM6_EXAMPLES should point to the mom6 directory that is checked out. It is needed by MOM6 to access its inpu data files-->
  <property name="MOM6_EXAMPLES"  value="$root/cm4_compile/src/mom6"/>

  <experiment name="cm4p5_$(AWG_VERSION)">
    <description>

Experiment to build executable. See git log for source code provenance.

    </description>

    <component name="fms" paths="shared">
     <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg"> shared.git </codeBase>
        <csh><![CDATA[
          ( cd shared && git checkout $(AWG_GIT_TAG) )
          ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_libMPI -Duse_netCDF </cppDefs>
      </compile>
    </component>

    <component name="atmos_phys" requires="fms" paths="atmos_param atmos_shared">
      <description domainName="" communityName="" communityVersion="$(RELEASE)" communityGrid=""/>
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="dev/awg">atmos_shared.git atmos_param.git</codeBase>
          <csh><![CDATA[
            ( cd atmos_shared && git checkout $(AWG_GIT_TAG) )
            ( cd atmos_param  && git checkout $(AWG_GIT_TAG) )
           ]]>
          </csh>
        </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DCLUBB</cppDefs>
      </compile>
    </component>

    <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools"
                                requires="fms atmos_phys">
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg">atmos_drivers.git atmos_cubed_sphere.git</codeBase>
        <csh><![CDATA[
          ( cd atmos_drivers && git checkout $(AWG_GIT_TAG) )
          ( cd atmos_cubed_sphere && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DSPMD</cppDefs>
      </compile>
    </component>

    <component name="ice_sis" requires="fms" paths="ice_sis ice_param">
      <description domainName="Sea Ice SIS" communityName="GFDL-SIS" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source>
        <codeBase version="$(RELEASE)"> ice_sis ice_param </codeBase>
<!--         <csh>cvs up -r adjustable_berg_warn_linits_jpk_20141003 ice_sis/ice_bergs.F90 #needed for CM4i_c96L48_am4a1r1_1pct-co2-2X</csh> -->
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_netCDF</cppDefs>
      </compile>
    </component>

    <component name="land_lad2" requires="fms" paths="land_lad2">
      <description domainName="LM3" communityName="land_lad2" communityVersion="$(RELEASE)" communityGrid=""/>
      <source>
<!--         <codeBase version="$(RELEASE)"> land_lad2 </codeBase> -->
        <codeBase version="$(RELEASE)"> land_lad2 </codeBase>
	<csh>
<!--            # Protection from negative soil water divergence situations,  -->
<!-- 	   ## merged with testing (Ulm_Patch)   -->
            cvs up -r ulm_merge_pjp land_lad2/soil/soil.F90
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>

<!--The following csh block is needed for compiler pre-processors that are not ANSI-compliant, such as pathscale-->
        <csh><![CDATA[
sed -e 's/<TAB>/\t/' >land/Makefile-cpp <<EOF
CPPDEFS = -DUSE_LOG_DIAG_FIELD_INFO $(F2003_FLAGS)
FRETARGET = $(target)

ifneq (\$(findstring hdf5,\${FRETARGET}),)
else
  CPPDEFS += -Duse_LARGEFILE
endif

vpath %.F90 \$(shell find ${src_dir}/land_lad2 -type d)

land/%.f90: %.F90
<TAB>cpp \${CPPDEFS} -C -v -I ${src_dir}/shared/include -o \$@ \$<

EOF

foreach foo ( `find ${src_dir}/land_lad2 -type f -name \*.F90` )
  make -f land/Makefile-cpp land/$foo:t:r.f90
end
find ${bld_dir}/land -type f -name \*.f90 > land/pathnames_land
          ]]>
        </csh>
      </compile>
    </component>

    <component name="mom6" requires="fms ocean_shared" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/github_mirror">
        <codeBase version="$(MOM6_GIT_TAG)"> NULL </codeBase>
        <csh>
          git clone -b $(MOM6_GIT_TAG) http://gitlab.gfdl.noaa.gov/github_mirror/noaa-gfdl-mom6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6  tools/python/025gridGeneration/MIDAS
          git clone --recursive http://gitlab.gfdl.noaa.gov/github_mirror/noaa-gfdl-mom6.git src/MOM6
          git submodule update #This gets the right version of submodules
          popd

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" == "zeus.fairmont.rdhpcs.noaa.gov") then
            ln -s /scratch2/portfolios/GFDL/gfdlscr/John.Krasting/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f1/pdata/gfdl_O/datasets/ .datasets
          endif
          popd

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
        </csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -D_USE_GENERIC_TRACER -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>

    <component paths="ocean_shared" requires="fms" name="ocean_shared">
      <description domainName="Ocean Generic Tracers" communityName="GFDL-ocean-shared" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source>
        <codeBase version="$(RELEASE)"> ocean_shared </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) </cppDefs>
      </compile>
    </component>

    <component name="coupler" paths="coupler" requires="fms atmos_dyn atmos_phys land_lad2 ice_sis mom6 ocean_shared">
      <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="dev/awg"> coupler.git </codeBase>
        <csh><![CDATA[
        ( cd coupler && git checkout $(AWG_GIT_TAG) )
        ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>
      </compile>
    </component>

  </experiment>

<!--============================-->
<!--= TEMPLATES FOR INPUT DATA =-->
<!--============================-->

  <experiment name="L48_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D48L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="L32_data">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/gas_conc_3D32L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
<!--
     <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C96L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150120.tar</dataSource>
-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Larry.Horowitz/awg/IC/awg_C96L48_LM3_OM4_025_grid_lm3p2_19810101.remapped.v20150604.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c96L32/topo_v20150507/awg_C96L32_LM3_OM4_025_grid_lm3p2_19810101.remapped.topodrag.v20150507.tar</dataSource>
        <!--dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/awg/IC/awg_C96L32_LM3_OM4_025_grid_lm3p2_19810101.remapped.v20150322.tar</dataSource-->
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C192L48_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c192L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/ic/awg_C192L32_LM3_OM4_025_grid_southshifted_19810101.remapped.v20150302.tar</dataSource-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Huan.Guo/INPUT/InitCond/AWG_c192L32_newLand20150522/Combine_LM3p2sosn_C192_OM4_025_19810101.remapped.v20150521_With_southshifted.v20150302.tar</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p5">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p5_faero">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_faero</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="field_table_am4p5_fullchem">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_fullchem_v20150604</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="common_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/common/sea_esf_dec2014.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)"> /lustre/f1/unswept/Bruce.Wyman/archive/mdt/awg/input/common/new_sea_esf_aug2013.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/awg/input/lm3/lm3_data_20150322.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/aerosol_inputs.dec2009.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/RCP/cmip5_rcp45.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/tropchem_dec2014.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.1x1.1859_2020.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emissions.isoprene.1x1.1859_2020.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(LWH_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/historical/emissions.isoprene_no_biogenic.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.simple.so2.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/emis_fuel_aircraft.1859_2010.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/emissions.aircraft.aero.1x1.1859_2020.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/emissions/so2_0.25_volcanoes.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201503" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/liteChem/input/aerosol/am4_optical_table_20150325.dat</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_faero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_faero</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_fullaero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="diag_table_lm3p2_fullchem">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_fullchemOnly_v20140325</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="amip_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
<!--    <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/sst/hadisst.186912-201401.tar</dataSource> -->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Chris.Golaz/awg/input/sst/hadisst.186912-201502.tar</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_co2</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="climo_data">
    <input>
      <dataFile label="input" target="INPUT/hadisst_sst.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/sst.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/hadisst_ice.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/cm3/ipcc_ar5/input/common/ice.climo.1981-2000.data.nc</dataSource>
      </dataFile>
      <!-- Repeat data_table_amip but not data_table_co2 -->
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--<dataSource platform="$(platform)">/lustre/f1/unswept/Ming.Zhao/archive/mdt/awg/newland/19810101.static_veg.southshifted.remapped_to_c96_OM4_025.v20150120.tar</dataSource>-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/fre/tikal/LM3/LM3p2_C96_CM2G_historical_HC1_quick/ncrc2.default-prod/static_veg/19810101.static_veg.lm3p2.remapped_to_c96_OM4_025.v20150322.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c96_OM4_025_hydrography_v20140620.tar</dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c96_OM4_025_grid_v20140620.tar</dataSource>
      </dataFile>
      <csh><![CDATA[
set domains_stack_size = "2097152"
if ( "$npes" == "432" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "864" ) then
  set atmos_npes = "432"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "3,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "3,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,3";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,3";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "576"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "4,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "4,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,4";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,4";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "1728" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "6,24";   set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";   set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6";  set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6";  set ice_io_layout   =  "1,3"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,16";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8";  set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8";  set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "1728"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "12,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "12,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,12"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,12"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "4608" ) then
  set atmos_npes = "2304"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "16,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "16,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "192,12"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "192,12"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "6912" ) then
  set atmos_npes = "3456"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "2"
  set fv_layout    =   "24,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "24,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,24"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,24"; set ice_io_layout   =  "1,4"
else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

  <experiment name="c192_data_lm3p2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <!--dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/19810101.static_veg.remapped_to_C192_OM4_025_southshifted.v20150302.tar</dataSource-->
        <dataSource platform="$(platform)">/lustre/f1/unswept/Sergey.Malyshev/DATA/static_veg/static_veg_LM3p2sosn_C192_OM4_025_historical_HC1_1981.remapped.v20150521.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/lm3/c192_OM4_025_hydrography_v20140708.tar </dataSource>
      </dataFile>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_ARCHIVE_ROOT)/awg/input/grid/c192_OM4_025_grid_v20140708.tar</dataSource>
      </dataFile>
      <csh><![CDATA[
set domains_stack_size = "3097152"
set do_ocean = "false"
if ( "$npes" == "864" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "6,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"
else if ( "$npes" == "1152" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "1"
  set nxblocks = "1" ; set nyblocks = "1"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "2304" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "2"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "8,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "8,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "3456" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "8"
  set fv_layout    =   "6,24";  set fv_io_layout    =  "1,4"
  set land_layout  =   "6,24";  set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"
else if ( "$npes" == "4608" ) then
  set atmos_npes = "1152"
  set atmos_nthreads = "4"
  set nxblocks = "1" ; set nyblocks = "4"
  set fv_layout    =   "12,16"; set fv_io_layout    =  "1,4"
  set land_layout  =   "12,16"; set land_io_layout  =  "1,4"
  set ocean_layout =   "144,8"; set ocean_io_layout =  "1,4"
  set ice_layout   =   "144,8"; set ice_io_layout   =  "1,4"
else if ( "$npes" == "6912" ) then
  set atmos_npes = "864"
  set atmos_nthreads = "8"
  set nxblocks = "2" ; set nyblocks = "4"
  set fv_layout    =   "12,12"; set fv_io_layout    =  "1,4"
  set land_layout  =   "12,12"; set land_io_layout  =  "1,4"
  set ocean_layout =   "144,6"; set ocean_io_layout =  "1,3"
  set ice_layout   =   "144,6"; set ice_io_layout   =  "1,3"

else
  if ( $echoOn ) unset echo
  echo "*ERROR*: npes == '$npes' is not supported in xml."
  if ( $echoOn ) set echo
  exit 1
endif

# runCommand:
alias runCommand "aprun -d $atmos_nthreads -n $atmos_npes ./$executable:t"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>

      <csh type="always"><![CDATA[
cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `/ncrc/home1/Larry.Horowitz/bin/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
      ]]></csh>
    </input>
  </experiment>

<!--================================-->
<!--= TEMPLATES FOR POSTPROCESSING =-->
<!--================================-->

  <experiment name="c96_amip_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c96_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" cubicToLatLon="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c192_amip_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" cubicToLatLon="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

  <experiment name="c192_climo_postprocess">
    <postProcess>

      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
<!-- MDBI, this switch must be on to trigger "fredb" automatically -->
          <analysis switch="$(MDBIswitch)" cumulative="no" script="$FRE_CURATOR_HOME/share/bin/database_ingestor.csh"/>
<!-- /MDBI -->
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" cubicToLatLon="none">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </experiment>

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

  <experiment name="c96L32_am4g5r1" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group.
Derived from "am4g5", but with flu_exchange bug fixes and revised settings
for dynamics time stepping.

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g5r1" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group,
but with 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="2:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L32_am4g5r1_fullaero" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group,
but with "full aerosols" as in "am4f4".

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip_fullaero.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="2:30:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g5r1_fullaero" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group,
but with "full aerosols" as in "am4f4" and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip_fullaero.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L48_am4g5r1_fullchem" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Derived from AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group,
but with "full chemistry" (as in AM3) and 48 levels.

- c96 horizontal grid with approximately 100km resolution and 48 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c96L48.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_c96_amip_chem.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_fullchem']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L48_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L48_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:40:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="04:00:00"/>
        <run months="1" npes="864"  runTimePerJob="03:00:00"/>
        <run months="1" npes="1152" runTimePerJob="02:00:00"/>
        <run months="1" npes="1728" runTimePerJob="01:30:00"/>
        <run months="1" npes="2304" runTimePerJob="01:30:00"/>
        <run months="1" npes="3456" runTimePerJob="01:30:00"/>
        <run months="1" npes="4608" runTimePerJob="01:30:00"/>
        <run months="1" npes="6912" runTimePerJob="01:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c192L32_am4g5r1" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

AM4 prototype configuration "am4g5r1" from MDT Atmosphere Working Group.
Derived from "am4g5", but with flu_exchange bug fixes and revised settings
for dynamics time stepping.

- c192 horizontal grid with approximately 50km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c192L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1200,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8" npes="864" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="1152" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1"   npes="864"  runTimePerJob="02:30:00"/>
        <run months="1"   npes="1152" runTimePerJob="02:00:00"/>
        <run months="1"   npes="2304" runTimePerJob="01:30:00"/>
        <run months="1"   npes="3456" runTimePerJob="01:00:00"/>
        <run months="1"   npes="4608" runTimePerJob="01:00:00"/>
        <run months="1"   npes="6912" runTimePerJob="01:00:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c192_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>


<!--=====================-->
<!--= CLIMO EXPERIMENTS =-->
<!--=====================-->

  <experiment name="c96L32_am4g5r1_2000climo" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Same model as c96L32_am4g5r1, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_CLIMO_START)"
      endTime="$(EXP_CLIMO_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L32_am4g5r1_1860climo" inherit="c96L32_am4g5r1_2000climo">
    <description>
Same model as c96L32_am4g5r1_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5r1_2000aero" inherit="c96L32_am4g5r1_2000climo">
    <description>
Same model as c96L32_am4g5r1_2000climo, but
configuration with present-day climatological SSTs, pre-industrial GHGs and present-day aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5r1_2000climo_p2K" inherit="c96L32_am4g5r1_2000climo">
    <description>
Same model as c96L32_am4g5r1_2000climo, but
configuration with present-day climatological SSTs + 2K, present-day GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo_p2K.nml"/>
    </input>
  </experiment>


  <experiment name="c192L32_am4g5r1_2000climo" inherit="cm4p5_$(AWG_VERSION)">

<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->

Same model as c192L32_am4g5r1, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.

    </description>

<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_CLIMO_START)"
      endTime="$(EXP_CLIMO_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5_c192L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1200,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8" npes="864" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="1152" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="timing">
        <run months="1"   npes="864"  runTimePerJob="02:30:00"/>
        <run months="1"   npes="1152" runTimePerJob="02:00:00"/>
        <run months="1"   npes="2304" runTimePerJob="01:30:00"/>
        <run months="1"   npes="3456" runTimePerJob="01:00:00"/>
        <run months="1"   npes="4608" runTimePerJob="01:00:00"/>
        <run months="1"   npes="6912" runTimePerJob="01:00:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c192_climo_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c192L32_am4g5r1_1860climo" inherit="c192L32_am4g5r1_2000climo">
    <description>
Same model as c192L32_am4g5r1_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c192L32_am4g5r1_2000aero" inherit="c192L32_am4g5r1_2000climo">
    <description>
Same model as c192L32_am4g5r1_2000climo, but
configuration with present-day climatological SSTs, pre-industrial GHGs and present-day aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c192L32_am4g5r1_2000climo_p2K" inherit="c192L32_am4g5r1_2000climo">
    <description>
Same model as c192L32_am4g5r1_2000climo, but
configuration with present-day climatological SSTs + 2K, present-day GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo_p2K.nml"/>
    </input>
  </experiment>


<!--=+=====================-->
<!--= am4g5r2 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g5r2" inherit="cm4p5_$(AWG_VERSION)">
    <description>
AM4 prototype configuration "am4g5r2" from MDT Atmosphere Working Group.
Derived from "am4g5r1". Improved hurricane simulation but higher climate sensitivity

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L32_am4g5r2_2000climo" inherit="cm4p5_$(AWG_VERSION)">
    <description>
Same model as c96L32_am4g5r2, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c96L32_am4g5r2_1860climo" inherit="c96L32_am4g5r2_2000climo">
    <description>
Same model as c96L32_am4g5r2_2000climo, but
configuration with present-day climatological SSTs, but pre-industrial GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5r2_2000aero" inherit="c96L32_am4g5r2_2000climo">
    <description>
Same model as c96L32_am4g5r2_2000climo, but
configuration with present-day climatological SSTs, pre-industrial GHGs and present-day aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5r2_2000climo_p2K" inherit="c96L32_am4g5r2_2000climo">
    <description>
Same model as c96L32_am4g5r2_2000climo, but
configuration with present-day climatological SSTs + 2K, present-day GHGs and aerosols.
    </description>
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo_p2K.nml"/>
    </input>
  </experiment>


  <experiment name="c192L32_am4g5r2" inherit="cm4p5_$(AWG_VERSION)">

    <description >
AM4 prototype configuration "am4g5r2" from MDT Atmosphere Working Group.
Derived from "am4g5r1". Improved hurricane simulation but higher climate sensitivity

- c192 horizontal grid with approximately 50km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_c192L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1200,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8" npes="864" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="1152" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1"   npes="864"  runTimePerJob="02:30:00"/>
        <run months="1"   npes="1152" runTimePerJob="02:00:00"/>
        <run months="1"   npes="2304" runTimePerJob="01:30:00"/>
        <run months="1"   npes="3456" runTimePerJob="01:00:00"/>
        <run months="1"   npes="4608" runTimePerJob="01:00:00"/>
        <run months="1"   npes="6912" runTimePerJob="01:00:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c192_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

  <experiment name="c192L32_am4g5r2_2000climo" inherit="cm4p5_$(AWG_VERSION)">

    <description>
Same model as c192L32_am4g5r2, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_c192L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1200,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c192L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="4608" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="3:00:00"/>
      </production>
      <regression name="basic">
        <run days="8" npes="864" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="1152" runTimePerJob="01:00:00"/>
      </regression>
      <regression name="timing">
        <run months="1"   npes="864"  runTimePerJob="02:30:00"/>
        <run months="1"   npes="1152" runTimePerJob="02:00:00"/>
        <run months="1"   npes="2304" runTimePerJob="01:30:00"/>
        <run months="1"   npes="3456" runTimePerJob="01:00:00"/>
        <run months="1"   npes="4608" runTimePerJob="01:00:00"/>
        <run months="1"   npes="6912" runTimePerJob="01:00:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c192_climo_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>

<!--=+===================================-->
<!--= am4g5r4 configurations from Larry =-->
<!--=+===================================-->

  <experiment name="c96L32_am4g5r4" inherit="cm4p5_$(AWG_VERSION)">
<!-- MDBI -->
    <description
communityProject="$(ProjectID)"
communityModel="am4p5"
communityModelID="am4p5"
communityExperimentName="$(name)"
communityExperimentID="$(name)" >
<!-- /MDBI -->
AM4 prototype configuration "am4g5r4" from MDT Atmosphere Working Group.
Derived from "am4g5r1". Improved hurricane simulation but higher climate sensitivity

- c96 horizontal grid with approximately 100km resolution and 32 vertical levels.
- Convection based on "double-plume" from Ming Zhao.
- Tiedtke cloud scheme

Changes from am4g5r2:
- aerosol wetdep from all snow except Bergeron
- no min/max checks for UW tracers (only negative checks, no filling)
- lightning NOx updates (in fullchem only)

NB: For faero configuration, am4g5r4 is identical to am4g5r3

For more information about AWG configurations, refer to
http://cobweb.gfdl.noaa.gov/~cjg/awg
    </description>
<!-- MDBI -->
    <realization r="1" i="1" p="1"/>
    <communityComment>
Experiment name = $(name)
    </communityComment>
    <scenario
      communityForcing="N/A"
      startTime="$(EXP_AMIP_START)"
      endTime="$(EXP_AMIP_END)"
      parentExperimentID="N/A"
      parentExperimentRIP="N/A"
      branch_time="0.0">
    </scenario>
<!-- /MDBI -->

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r3_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1980,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>
      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='amip_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="debug">
        <run days="2"   npes="432"  runTimePerJob="02:00:00"/>
      </regression>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="scaling">
        <run days="8"   npes="1152" runTimePerJob="00:30:00"/>
        <run days="8"   npes="1728" runTimePerJob="00:30:00"/>
        <run days="8"   npes="2304" runTimePerJob="00:30:00"/>
        <run days="8"   npes="3456" runTimePerJob="00:30:00"/>
        <run days="8"   npes="4608" runTimePerJob="00:30:00"/>
        <run days="8"   npes="6912" runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>


  <experiment name="c96L32_am4g5r4_2000climo" inherit="cm4p5_$(AWG_VERSION)">
    <description>
Same model as c96L32_am4g5r4, but
configuration with present-day climatological SSTs, present-day GHGs and aerosols.
    </description>

    <input>
      <namelist name="atmos_model_nml">
         nxblocks = $nxblocks
         nyblocks = $nyblocks
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r3_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4g5r2_c96L32.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1,1,1,0,0,0,
        calendar = 'noleap'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = 0
        atmos_npes = $atmos_npes
        atmos_nthreads = $atmos_nthreads
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//experiment[@name='common_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='diag_table_lm3p2_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='field_table_am4p5_faero']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='climo_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96_data_lm3p2']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='L32_data']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='c96L32_initCond']/input/node())"/>
    </input>

    <runtime>
      <production simTime="$(EXP_CLIMO_LEN)" units="years" npes="1728" runTime="16:00:00">
        <segment simTime="12" units="months" runTime="1:20:00"/>
      </production>
      <regression name="basic">
        <run days="8"   npes="432"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="restart">
        <run days="4 4" npes="864"  runTimePerJob="00:30:00"/>
      </regression>
      <regression name="timing">
        <run months="1" npes="432"  runTimePerJob="02:00:00"/>
        <run months="1" npes="864"  runTimePerJob="01:00:00"/>
        <run months="1" npes="1152" runTimePerJob="00:45:00"/>
        <run months="1" npes="1728" runTimePerJob="00:45:00"/>
        <run months="1" npes="2304" runTimePerJob="00:30:00"/>
        <run months="1" npes="3456" runTimePerJob="00:30:00"/>
        <run months="1" npes="4608" runTimePerJob="00:30:00"/>
        <run months="1" npes="6912" runTimePerJob="00:30:00"/>
      </regression>
    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//experiment[@name='c96_climo_postprocess']/postProcess/node())"/>
    </postProcess>

  </experiment>


<!--=+=====================-->
<!--= am4g5r5 experiments =-->
<!--=+=====================-->

  <experiment name="c96L32_am4g5r5" inherit="c96L32_am4g5r4">
    <description>
Based on c96L32_am4g5r4 but with a number of updates:
- Turn on modification from Bruce to improve energy conservation in radiation
    radiation_driver_nml: do_conserve_energy = .true.
- Updated field table from Paul Ginoux. The original filed table had
  incorrect radiation names for sea salt. Correct names are
    ssalt1: "name_in_rad_mod=seasalt_aitken
    ssalt2: "name_in_rad_mod=seasalt_fine
    ssalt3: "name_in_rad_mod=seasalt_coarse
    </description>

    <input>
      <namelist name="radiation_driver_nml">
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
      </namelist>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_faero_fix</dataSource>
      </dataFile>
    </input>

  </experiment>

  <experiment name="c96L32_am4g5r5_2000climo" inherit="c96L32_am4g5r4_2000climo">
    <input>
      <namelist name="radiation_driver_nml">
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
      </namelist>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_faero_fix</dataSource>
      </dataFile>
    </input>
  </experiment>

<!--=============================-->
<!--= am4g5 TKE PBL experiments =-->
<!--=============================-->

  <experiment name="c96L32_am4g5_tkepbl" inherit="c96L32_am4g5r1">
    <input>
      <namelist name="deep_conv_nml">
        auto_th0_d = 0.2e-3
        tcrit_d    = -40.0,
        peff_l_d   = 5.0e-5
        peff_i_d   = 10.e-5
        rkm_dp1 = 1.5
        rkm_dp2 = 0.001
        norder  = 1
        crh_th_ocean = 0.5
        crh_th_land  = 0.5
        cin_th = 5.
        cape_th = 10.
        cwfn_th = 10.
        frac_rkm_pert = 0.
        tau_dp = 28800.
        tau_dp_fact = 3.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 5.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.9
        pblfac_d   = 0.25
        ffldep_d   = 0.
        frac_limit_d = 0.05
        dcapedm_th = 100
        dcwfndm_th = 100
        lofactor_d = 0.5
        do_lod_rkm   = .false.
        do_lod_cfrac = .false.
        do_lod_tcrit = .false.
        do_stochastic_rkm =.false.
        do_cgust_dp  = .true.
        cgust_choice = 3
        cin_fact  = 1.
        do_forcedlifting_d = .false.
        wcrit_min_gust = 0.2
        do_forced_conv = .false.
      </namelist>
      <namelist name="tke_turb_nml">
        tke_option = 1,
        buoync_option = 3,
        pbl_depth_option = 0,
        tkemin  = 0.0,
        tkecrit = 0.3,
        akmin_land = 0.,
        akmin_sea  = 0.,
      </namelist>
      <namelist name="uw_conv_nml">
        use_online_aerosol = .true.,
        iclosure        = 0,
        rkm_sh1         = 15.0,
        rkm_sh          = 3.0,
        cldhgt_max      = 50.e3,
        do_uwcmt        = .false.,
        apply_tendency  = .true.,
        wmin_ratio      = 0.05,
        do_lands        = .false.
        landfact_m      = 0.5
        lochoice        = 0
        lofactor0       = 0.75
        do_deep         = .true.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_sub_seasalt = .false.
        use_new_let     = .true.
        do_subcloud_flx = .true.
        plev_cin        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        duration        = 10800
        do_stime        = .false.
        do_dtime        = .false.
        stime0          = 0.8
        dtime0          = 0.1
        do_prog_tke     = .false.
        tau_tke         = 7200
        bfact           = 0.05
        pblrat0         = 2.0
        do_prog_gust    = .true.
        tau_gust        = 10800
        gfact           = 1.0
        do_gust_qt      = .false.
        gqt_choice      = 0
        cgust0          = 2.
        cgust_max       = 4.
        sigma0          = 0.5
        tracer_check_type = 1
      </namelist>
      <namelist name="vert_turb_driver_nml">
        use_tau          = .false.,
        gust_scheme      = 'beljaars',
        do_mellor_yamada = .false.,
        do_tke_turb      = .true.,
        do_entrain       = .false.,
        do_edt           = .false.,
        do_diffusivity   = .false.,
        do_stable_bl     = .false.,
        do_shallow_conv  = .false.
      </namelist>
      <diagTable order="append">
"flux",      "t_surf",                        "t_surf_min",      "atmos_daily",     "all",  min,    "none", 2
"flux",      "t_surf",                        "t_surf_max",      "atmos_daily",     "all",  max,    "none", 2
"flux",      "t_ca",                          "t_ca_min",        "atmos_daily",     "all",  min,    "none", 2
"flux",      "t_ca",                          "t_ca_max",        "atmos_daily",     "all",  max,    "none", 2

"flux",      "t_surf",      "t_surf",      "atmos_diurnal", "all", "diurnal24", "none", 2
"flux",      "t_ca",        "t_ca",        "atmos_diurnal", "all", "diurnal24", "none", 2
      </diagTable>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_faero</dataSource>
      </dataFile>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_tke</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5_tkepbl_2000climo" inherit="c96L32_am4g5r1_2000climo">
    <input>
      <namelist name="deep_conv_nml">
        auto_th0_d = 0.2e-3
        tcrit_d    = -40.0,
        peff_l_d   = 5.0e-5
        peff_i_d   = 10.e-5
        rkm_dp1 = 1.5
        rkm_dp2 = 0.001
        norder  = 1
        crh_th_ocean = 0.5
        crh_th_land  = 0.5
        cin_th = 5.
        cape_th = 10.
        cwfn_th = 10.
        frac_rkm_pert = 0.
        tau_dp = 28800.
        tau_dp_fact = 3.
        mixing_assumption_d = 4
        do_ppen_d  = .true.
        rpen_d     = 5.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.9
        pblfac_d   = 0.25
        ffldep_d   = 0.
        frac_limit_d = 0.05
        dcapedm_th = 100
        dcwfndm_th = 100
        lofactor_d = 0.5
        do_lod_rkm   = .false.
        do_lod_cfrac = .false.
        do_lod_tcrit = .false.
        do_stochastic_rkm =.false.
        do_cgust_dp  = .true.
        cgust_choice = 3
        cin_fact  = 1.
        do_forcedlifting_d = .false.
        wcrit_min_gust = 0.2
        do_forced_conv = .false.
      </namelist>
      <namelist name="tke_turb_nml">
        tke_option = 1,
        buoync_option = 3,
        pbl_depth_option = 0,
        tkemin  = 0.0,
        tkecrit = 0.3,
        akmin_land = 0.,
        akmin_sea  = 0.,
      </namelist>
      <namelist name="uw_conv_nml">
        use_online_aerosol = .true.,
        iclosure        = 0,
        rkm_sh1         = 15.0,
        rkm_sh          = 3.0,
        cldhgt_max      = 50.e3,
        do_uwcmt        = .false.,
        apply_tendency  = .true.,
        wmin_ratio      = 0.05,
        do_lands        = .false.
        landfact_m      = 0.5
        lochoice        = 0
        lofactor0       = 0.75
        do_deep         = .true.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_sub_seasalt = .false.
        use_new_let     = .true.
        do_subcloud_flx = .true.
        plev_cin        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        duration        = 10800
        do_stime        = .false.
        do_dtime        = .false.
        stime0          = 0.8
        dtime0          = 0.1
        do_prog_tke     = .false.
        tau_tke         = 7200
        bfact           = 0.05
        pblrat0         = 2.0
        do_prog_gust    = .true.
        tau_gust        = 10800
        gfact           = 1.0
        do_gust_qt      = .false.
        gqt_choice      = 0
        cgust0          = 2.
        cgust_max       = 4.
        sigma0          = 0.5
        tracer_check_type = 1
      </namelist>
      <namelist name="vert_turb_driver_nml">
        use_tau          = .false.,
        gust_scheme      = 'beljaars',
        do_mellor_yamada = .false.,
        do_tke_turb      = .true.,
        do_entrain       = .false.,
        do_edt           = .false.,
        do_diffusivity   = .false.,
        do_stable_bl     = .false.,
        do_shallow_conv  = .false.
      </namelist>
      <diagTable order="append">
"flux",      "t_surf",                        "t_surf_min",      "atmos_daily",     "all",  min,    "none", 2
"flux",      "t_surf",                        "t_surf_max",      "atmos_daily",     "all",  max,    "none", 2
"flux",      "t_ca",                          "t_ca_min",        "atmos_daily",     "all",  min,    "none", 2
"flux",      "t_ca",                          "t_ca_max",        "atmos_daily",     "all",  max,    "none", 2

"flux",      "t_surf",      "t_surf",      "atmos_diurnal", "all", "diurnal24", "none", 2
"flux",      "t_ca",        "t_ca",        "atmos_diurnal", "all", "diurnal24", "none", 2
      </diagTable>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p5_faero</dataSource>
      </dataFile>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_tke</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5_tkepbl_1860climo" inherit="c96L32_am4g5_tkepbl_2000climo">
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_1860climo.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5_tkepbl_2000aero" inherit="c96L32_am4g5_tkepbl_2000climo">
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000aero.nml"/>
    </input>
  </experiment>

  <experiment name="c96L32_am4g5_tkepbl_2000climo_p2K" inherit="c96L32_am4g5_tkepbl_2000climo">
    <input>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p5_2000climo_p2K.nml"/>
    </input>
  </experiment>

</experimentSuite>
